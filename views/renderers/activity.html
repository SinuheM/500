<!doctype html>
<html class="no-js" lang="en">
<head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, maximum-scale=1"/>
    <title>Activity Feed - 500 Startups</title>
    <link rel="stylesheet" href="/css/foundation.css" />
    <link rel="stylesheet" href="/css/500.css" />
    <link rel="stylesheet" href="/css/animate.min.css" />
    <script src="/js/vendor/modernizr.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Exo+2:300,400,500,600,700,800' rel='stylesheet' type='text/css'>
    <link rel="alternate" type="application/rss+xml" title="500 Startups Â» Feed" href="http://500.co/feed/">
    <script src="/js/google-analytics.js"></script>
    <script type="text/javascript">
window.analytics=window.analytics||[],window.analytics.methods=["identify","group","track","page","pageview","alias","ready","on","once","off","trackLink","trackForm","trackClick","trackSubmit"],window.analytics.factory=function(t){return function(){var a=Array.prototype.slice.call(arguments);return a.unshift(t),window.analytics.push(a),window.analytics}};for(var i=0;i<window.analytics.methods.length;i++){var key=window.analytics.methods[i];window.analytics[key]=window.analytics.factory(key)}window.analytics.load=function(t){if(!document.getElementById("analytics-js")){var a=document.createElement("script");a.type="text/javascript",a.id="analytics-js",a.async=!0,a.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.io/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n)}},window.analytics.SNIPPET_VERSION="2.0.9",
window.analytics.load("i3r08av9ee");
window.analytics.page();
</script>
</head>
<body>
	{% include "../partials/navbar.html" %}
    <section id="activity">
        <div class="center">
            <h3 class="text-center">One feed for everything 500</h3>
            <h6><a href="http://500.co/feed"> <img src="/img/rss.png">RSS</a></h6>
            <ul class="filter">
                <li {% if !filter %}class="active"{% endif %}><a href="/activity">ALL</a></li>
                <li {% if filter == 'announcements' %}class="active"{% endif %}><a href="/announcements">ANNOUNCEMENTS</a></li>
                <li {% if filter == 'post' %}class="active"{% endif %}><a href="/blog">BLOG POSTS</a></li>
                <li {% if filter == 'podcast' %}class="active"{% endif %}><a href="/podcast">PODCASTS</a></li>
                <li {% if filter == 'video' %}class="active"{% endif %}><a href="/videos">VIDEOS</a></li>
                <li><a href="/on-the-web">ON THE WEB</a></li>
            </ul>
            <div class="clearfix"></div>
            <ul id="activity-list">
            	{% for activity in activities %}
                {% if activity.type == 'post'%}
                    {% if activity.announcement%}
                    <li class="announcement">
                        <div class="row-2">
                            <span>1 day ago</span>
                            <span class="tag">OFFICIAL ANNOUNCEMENT</span>
                        </div>
                    {% else%}
                    <li class="blog">
                        <div class="row-2">
                            <span class="refresh-time" data-time="{{activity.createdDate|dateToString}}">{{activity.createdDate|ago}} ago</span>
                            <span class="tag">ON OUR BLOG</span>
                        </div>                    
                    {% endif %}
                        <div class="row-10">
                            <a target="_blank" href="/{{activity.slugStr}}">
                                <h4>{{activity.title}}</h4>
                                <div class="info">
                                    <div class="image"><img src="{{ activity.image }}"></div>
                                    <div class="detail">
                                        <p>{{activity.description}}</p>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="meta">
                                    {% if activity.uploader %}
                                    <span>ADDED BY</span> <a class="added-by" href="/{{ activity.uploader.slugStr }}">{{activity.uploader.displayName}}</a>
                                    {% endif %}
                                </div>
                            </a>
                        </div>
                    </li>
                {% elseif activity.type == 'podcast'%}
                <li class="podcast">
                    <div class="row-2">
                        <span class="refresh-time" data-time="{{activity.createdDate|dateToString}}">{{activity.createdDate|ago}} ago</span>
                        <span class="tag">PODCAST</span>
                    </div>
                    <div class="row-10">
                        <a target="_blank" href="/{{ activity.slugStr }}"><h4>{{ activity.title }}</h4></a>
                        <div class="info">
                            {{activity.content|safe}}
                        </div>
                        <div class="clearfix"></div>
                        <div class="meta">
                            {% if activity.uploader %}
                            <span>ADDED BY</span> <a class="added-by" href="/{{ activity.uploader.slugStr }}">{{activity.uploader.displayName}}</a>
                            {% endif %}
                        </div>
                    </div>
                </li>
                {% elseif activity.type == 'video'%}
                <li class="video">
                    <div class="row-2">
                        <span class="refresh-time" data-time="{{activity.createdDate|dateToString}}">{{activity.createdDate|ago}} ago</span>
                        <span class="icon"><img src="{{ activity.favicon }}"></span>
                    </div>
                    <div class="row-10">
                        <h4>{{ activity.title }}</h4>                    
                        <div class="info">
                            <div class="video">{{ activity.media|safe }}</div>
                        </div>
                        <div class="clearfix"></div>
                        <div class="meta">
                            {% if activity.uploader %}
                            <span>ADDED BY</span> <a class="added-by" href="/{{ activity.uploader.slugStr }}">{{activity.uploader.displayName}}</a>
                            {% endif %}
                        </div>
                    </div>
                </li>                
                {% else%}
                    {% if activity.provider == "twitter.com"%}
                    <li class="twitt">
                        <div class="row-2">
                            <span class="refresh-time" data-time="{{activity.createdDate|dateToString}}">{{activity.createdDate|ago}} ago</span>
                            <span class="icon"><img src="{{ activity.favicon }}"></span>
                        </div>
                        <div class="row-10">
                            <h4><a class="twitt-body" target="_blank" href="{{ activity.slugStr }}">" {{ activity.description }} "</a></h4>
                            <div class="">
                                <div class="image"><img src="{{ activity.image }}"> by <a target="_blank" href="{{ activity.author.url }}">@{{ activity.author.name }}</a></div>
                            </div>                            
                            <div class="clearfix"></div>
                            <div class="meta">
                                {% if activity.uploader %}
                                <span>ADDED BY</span> <a class="added-by" href="/{{ activity.uploader.slugStr }}">{{activity.uploader.displayName}}</a>
                                {% endif %}
                            </div>
                        </div>
                    </li>                    
                    {% else %}
                    <li class="normal">
                        <div class="row-2">
                            <span class="refresh-time" data-time="{{activity.createdDate|dateToString}}">{{activity.createdDate|ago}} ago</span>
                            <span class="icon"><img src="{{activity.favicon}}"></span>
                        </div>
                        <div class="row-10">
                            <h4><a target="_blank" href="{{activity.slugStr}}">{{activity.title}}</a></h4>
                            <div class="info">
                                <a target="_blank" href="{{activity.slugStr}}">
                                    <div class="detail">
                                        <img src="{{activity.image}}">
                                        <p>{{activity.description}}</p>
                                        <p class="provider">View on {{activity.provider}}</p>
                                    </div>
                                </a>
                            </div>
                            <div class="clearfix"></div>
                            <div class="meta">
                                {% if activity.uploader %}
                                <span>ADDED BY</span> <a class="added-by" href="/{{ activity.uploader.slugStr }}">{{activity.uploader.displayName}}</a>
                                {% endif %}
                            </div>
                        </div>
                    </li>
                    {% endif %}
                {% endif %}
                {% endfor %}

                {% if hasNext %}
                <li>
                    <a class="jscroll-next" href="/utils/next-activities?page={{page}}&type={{filter}}">More...</a>
                </li>
                {% endif %}
            </ul>
            <div id="activity-circle"></div>
            <div class="clearfix"></div>
        </div>
    </section>
    {% include "../partials/footer.html" %}
<script src="/js/vendors/moment.min.js"></script>
<script src="/js/vendor/jquery.js"></script>
<script src="/js/foundation.min.js"></script>
<script src="/js/vendors/jquery.jscroll.min.js"></script>
<script src="/js/app/activity.js"></script>
<script>
    window.calculateSizes = function(){
        $('.announcement .image img, .blog .image img').each(function(i, img){
            var $img = $(img);
            $img.css('top', -1 * (($img.height() / 2) - 100) )
        });

        $('li.video iframe').each(function(i, iframe){
            var $iframe = $(iframe);
            var aspectRatio = $iframe.height() / $iframe.width();

            $iframe.css('width', '100%');
            $iframe.css('height', $iframe.width() * aspectRatio);
        });
    }

    $(document).foundation();
    $(document).ready(function () {
        window.calculateSizes();

        {% if hasNext %}
        $('#activity-list').jscroll({
            loadingHtml: '<div class="load">LOADING...</div>',
            nextSelector: 'a.jscroll-next',
            contentSelector: '#activity-list li',
            callback : function(){
                $('#activity-list img').each(function(i, img){
                    $(img).on('load', window.calculateSizes);
                });
            }
        });
        {% endif %}
    });

    $(window).resize(window.calculateSizes);
    $(window).load(window.calculateSizes);
</script>

<script type="text/javascript">
    $(document).ready(function () {
        var lastScrollTop = 0;
        $(window).on('scroll', function(){
            $('#int').one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function(){ $('#int').removeClass('animated'); });
            var busy = 0;
            var st = $(this).scrollTop();
            if (st > lastScrollTop && busy==0 && st>0){
                busy=1;
                $('#int').css('position','absolute').addClass('animated bounceInDown').attr('rel','bar_top');
            }
            if (st <= lastScrollTop){
                if( $('#int').attr('rel') == 'bar_top' ){
                    $('#int').attr('rel','1');
                    $('#int').css('position','fixed').addClass('animated bounceInDown');
                }
                else
                    $('#int').css('position','fixed');
            }
            lastScrollTop = st;
        });
    });
</script>
</body>
</html>